# Конвертер кассовых файлов из формата Пилот во Фронтол
Учетная система Домино 7.8 
Кассовая программа Фронтол 6 

## Оглавление

0. [Цель проекта](#Цель-проекта)
1. [Номера касс](#Номера-касс)
2. [Установка и запуск](#Установка-и-запуск)
3. [TODO](#TODO)


## Цель проекта 
Внешний обработчик файлов для кассы из формата Пилот в формат Фронтол

Цель проекта - конвертировать файлы из формата Пилот в формат Фронтол
Для каждой кассы существует своя папка в директории w:/MAIL/FOR_KAS/
по ее номеру, например w:/MAIL/FOR_KAS/**1**
сделать w:/MAIL/FOR_KAS/**1_FRONTOL** и конвертированные файлы складывать туда
из директории-источника сконвертированное удалять

Учетная система Домино 7.8 ведет обмен с кассами по формату Пилот 
(см. руководство интегратора) Передача товаров на кассу производится через меню
"Передать товар на кассу" из реестра переоценки / справочника
При попытке интеграции с Фронтол 6 поддерживаемый формат обмена 
имеет следующие ограничения:

- Формат устарел и похоже что не поддерживается со стороны Фронтол
- В формате «PILOT» автоматическая загрузка данных невозможна. 
- Отсутствует поле для ставки НДС
- Отсутствует поле признака маркированного товара
- Кастомные поля ломают обмен

Преимущества использования конвертера:
- Обратная совместимость с уже существующими кассами, можно работать паралленьно
на старых и новых
- Гибкость, можно не дорабатывать выгрузку в Домино, настройки менять в скрипте 


[:arrow_up:Оглавление](#Оглавление)


## Номера касс

1. Касса1 живая Домино
2. Касса2 резерв тестовая Фронтол
3. Касса3 резерв
4. Касса4 живая Домино
5. Касса5 резерв
6. Касса6 живая Домино
7. Касса7 обмен с прайсчекером

## Установка и запуск

- На машине должен быть установлен Python 3.13
- domino_frontol_for_kas_converter.py положим в w:/MAIL/FOR_KAS/Номер кассы
- domino_frontol_for_kas_converter.py в скрипте поправить пути для каждой кассы
- создать директории куда конвертировать и для логов для каждой кассы
- frontol_converter_run.bat туда же, для каждой кассы свой, поправить его 
- дергать frontol_converter_run виндовым шедулером раз в минуту
- если надо чаще, смотрим в сторону библиотеки schedule

## TODO

[] Прогрузить дисконтные карты
[] Режим удаления штрихкодов
[] Подумать про мониторинг